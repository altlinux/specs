# NOTE: Do not edit, file was generated by jhconvert

Name: olpcsound
Version: 5.10.1
Release: alt3.1.1
Summary: Csound - sound synthesis language and library, OLPC subset
License: LGPLv2+
Group: Sound
Url: http://csound.sourceforge.net/
Packager: Sugar Development Team <sugar@packages.altlinux.org>

Source: http://downloads.sourceforge.net/csound/Csound5.10.1.tar.gz

Patch: olpcsound-5.10.1-gentoo-proaudio-csound-SConsruct.patch
Patch1: olpcsound-5.10.1-sugar-csound-64bit.patch
Patch2: olpcsound-5.10.1-sugar-csound-bad-symbols.patch
Patch3: olpcsound-5.10.1-sugar-csound-python-version.patch

Requires: lib%name = %version-%release
Conflicts: csound

BuildPreReq: libalsa-devel  
BuildPreReq: gettext  
BuildPreReq: liblo-devel  
BuildPreReq: libogg-devel  
BuildPreReq: libpng-devel  
BuildPreReq: libsndfile-devel  
BuildPreReq: libvorbis-devel  
BuildPreReq: python-devel  
BuildPreReq: scons  
BuildPreReq: swig  
BuildPreReq: gcc-c++

%description
Olpcsound is a subset of the Csound sound and music synthesis system,
tailored specifically for XO platform.

%package -n lib%name
Summary: Libraries for %name
Group: System/Libraries
Conflicts: libcsound

%description -n lib%name
Olpcsound is a subset of the Csound sound and music synthesis system,
tailored specifically for XO platform.

%package -n lib%name-devel
Summary: Development files for %name
Group: Development/C
Requires: lib%name = %version-%release
Conflicts: libcsound-devel

%description -n lib%name-devel
Olpcsound is a subset of the Csound sound and music synthesis system,
tailored specifically for XO platform.

%package -n python-module-%name
Summary: Python bindings for %name
Group: Development/Python
Requires: %name = %version-%release
Requires: python  

%description -n python-module-%name
Olpcsound is a subset of the Csound sound and music synthesis system,
tailored specifically for XO platform.

%prep
%setup -v -n Csound5.10.1
%patch -p1
%patch1 -p1
%patch2 -p1
%patch3 -p1

%ifarch %ix86
%global x86_64_flags Word64=0 Lib64=0
%else
%global x86_64_flags Word64=1 Lib64=1
%endif

%build
scons  \
	buildOLPC=1 \
	useJack=0 \
	gcc3opt=0 \
	gcc4opt=0 \
	%x86_64_flags

%install
python  \
	install-olpc.py \
	--install-python \
	--install-headers \
	--instdir=%{buildroot} \
	--libdir=%{_libdir}
%find_lang csound5

%files -f csound5.lang
%_bindir/*
%_datadir/doc/csound

%files -n lib%name
%_libdir/*.so.*
%_libdir/csound

%files -n lib%name-devel
%_includedir/csound
%_libdir/libcsound.so
%_libdir/libcsnd.so

%files -n python-module-%name
%{python_sitelibdir}/*

%changelog
* Sat Oct 22 2011 Vitaly Kuznetsov <vitty@altlinux.ru> 5.10.1-alt3.1.1
- Rebuild with Python-2.7

* Wed Nov 25 2009 Eugeny A. Rostovtsev (REAL) <real at altlinux.org> 5.10.1-alt3.1
- Rebuilt with python 2.6

* Tue Apr 28 2009 Aleksey Lim <alsroot@altlinux.org> 5.10.1-alt3
- fix %files warnings

* Tue Apr 28 2009 Aleksey Lim <alsroot@altlinux.org> 5.10.1-alt2
- remove hardcoded Python version

* Wed Mar 18 2009 Aleksey Lim <alsroot@altlinux.org> 5.10.1-alt1
- update to 5.10.1 version

* Sat Jan 10 2009 Aleksey Lim <alsroot@altlinux.org> 5.09.0-alt1
- first build for ALT Linux Sisyphus
