%define pypi_name click-repl
%define mod_name click_repl

%def_with check

Name: python3-module-click-repl
Version: 0.3.0
Release: alt2

Summary: REPL plugin for Click

License: MIT
Group: Development/Python3
Url: https://pypi.org/project/click-repl/
Vcs: https://github.com/click-contrib/click-repl
Source: %name-%version.tar

BuildRequires(pre): rpm-build-intro >= 2.2.5
BuildRequires(pre): rpm-build-python3

BuildArch: noarch

BuildRequires: python3-module-setuptools
%if_with check
BuildRequires: python3-module-pytest
%endif

# generated by 'epm restore --dry-run' from click-repl/setup.py install_requires
%py3_use click
%py3_use prompt_toolkit
%py3_use six

%description
REPL plugin for Click.

%prep
%setup

%build
%pyproject_build

%install
%pyproject_install

%check
# see .github/workflows/tests.yml and tox.ini
%pyproject_run_pytest -vra -o=addopts=''

%files
%doc README.*
%python3_sitelibdir/%mod_name/
%python3_sitelibdir/%{pyproject_distinfo %pypi_name}/

%changelog
* Tue Oct 08 2024 Stanislav Levin <slev@altlinux.org> 0.3.0-alt2
- migrated from removed setuptools' test command (#51666).

* Sun Feb 18 2024 Vitaly Lipatov <lav@altlinux.ru> 0.3.0-alt1
- new version 0.3.0 (with rpmrb script)

* Tue Jul 06 2021 Vitaly Lipatov <lav@altlinux.ru> 0.2.0-alt1
- initial build for ALT Sisyphus
