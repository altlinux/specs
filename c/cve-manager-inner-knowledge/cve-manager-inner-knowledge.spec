%define master_package cve-manager
%define dist %{_sysconfdir}/%{master_package}

Name: %{master_package}-inner-knowledge
Version: 2019.12.04
Release: alt1

Summary: Supplimentary data for cve-manager
License: CC-BY-SA-3.0
Group: Other
Url: https://www.altlinux.org/CVE-Manager

Packager: Alexey Appolonov <alexey@altlinux.org>

# http://git.altlinux.org/people/alexey/packages/?p=%{name}.git
Source: %{name}-%{version}.tar

BuildRequires: python3

Requires: %{master_package} >= 0.25

ExclusiveArch: x86_64

%description
The list of mapping prescriptions (package name >> cpe product) and
the list of vulnerabilities that are not affecting the stated branches.

%prep
%setup
%build

%check
./checker

%install
mkdir -p %{buildroot}%{dist}
cp *.csv %{buildroot}%{dist}
chmod 664 %{buildroot}%{dist}/*.csv

%post
# cve group should be created at the post stage of cve-manager installation
chgrp cve %{dist}/*.conf

%files
%{dist}/*.csv

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

%changelog
* Wed Dec 04 2019 Alexey Appolonov <alexey@altlinux.org> 2019.12.04-alt1
- New type of inner knowledge - discarded matches (matches that should not
  be saved in cve-manager DB).

* Mon Nov 25 2019 Alexey Appolonov <alexey@altlinux.org> 2019.11.23-alt2
- cve-manager users are privileged to modify the lists.

* Sat Nov 23 2019 Alexey Appolonov <alexey@altlinux.org> 2019.11.23-alt1
- Initial release.
