%define master_package cve-manager
%define lists_dist %{_sysconfdir}/%{master_package}
%define miner %{master_package}-knowledge-miner

Name: %{master_package}-inner-knowledge
Version: 2020.09.07
Release: alt1

Summary: Supplimentary data for cve-manager
License: CC-BY-SA-3.0
Group: Other
Url: https://www.altlinux.org/CVE-Manager

Packager: Alexey Appolonov <alexey@altlinux.org>

# http://git.altlinux.org/people/alexey/packages/?p=%{name}.git
Source: %{name}-%{version}.tar

BuildRequires: python3
Requires: %{master_package} >= 0.31

ExclusiveArch: x86_64

%description
The list of mapping prescriptions (package name >> cpe product) and
the list of vulnerabilities that are not affecting the stated branches.

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

%package -n %{miner}
Summary: %{master_package} DB client for making specific queries
Group: Other

Requires: python3-module-ax

%description -n %{miner}
%{miner} helps to get various kinds of information from %{master_package} DB
such as used package names, used CPEs, etc.

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

%prep
%setup
%build

%check
./checker

%install
mkdir -p %{buildroot}%{lists_dist}
mkdir -p %{buildroot}%{_bindir}
install -m0664 *.csv %{buildroot}%{lists_dist}
install -m0755 %{miner} %{buildroot}%{_bindir}

%post
# cve group should be created at the post stage of cve-manager installation
chgrp cve %{lists_dist}/*.conf

%files
%{lists_dist}/*.csv

%files -n %{miner}
%{_bindir}/%{miner}

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

%changelog
* Mon Sep 07 2020 Alexey Appolonov <alexey@altlinux.org> 2020.09.07-alt1
- Updated list of ignored mapping pairs.

* Fri Aug 28 2020 Alexey Appolonov <alexey@altlinux.org> 2020.08.28-alt1
- Updated lists.

* Wed Aug 26 2020 Alexey Appolonov <alexey@altlinux.org> 2020.08.26-alt1
- Updated lists.

* Tue Aug 25 2020 Alexey Appolonov <alexey@altlinux.org> 2020.08.25-alt1
- Updated lists.

* Fri Aug 21 2020 Alexey Appolonov <alexey@altlinux.org> 2020.08.21-alt1
- Updated lists.

* Mon Aug 17 2020 Alexey Appolonov <alexey@altlinux.org> 2020.08.17-alt1
- Updated list of ignored mapping pairs.

* Fri Aug 14 2020 Alexey Appolonov <alexey@altlinux.org> 2020.08.14-alt1
- Updated list of of prescribed mapping pairs.

* Thu Apr 30 2020 Alexey Appolonov <alexey@altlinux.org> 2020.04.30-alt1
- Updated list of excluded CPEs.

* Sun Apr 19 2020 Alexey Appolonov <alexey@altlinux.org> 2020.04.19-alt1
- Updated list of ignored mapping pairs.

* Mon Apr 13 2020 Alexey Appolonov <alexey@altlinux.org> 2020.04.13-alt1
- Updated lists.

* Wed Feb 19 2020 Alexey Appolonov <alexey@altlinux.org> 2020.02.19-alt1
- A tool for mining some of the knowledge;
- A new list (the list of excluded CPEs);
- Updated list of ignored mapping pairs and updated list of prescribed
  mapping pairs.

* Thu Feb 13 2020 Alexey Appolonov <alexey@altlinux.org> 2020.02.13-alt1
- Updated lists.

* Sun Feb 02 2020 Alexey Appolonov <alexey@altlinux.org> 2020.02.02-alt1
- Updated lists.

* Tue Dec 24 2019 Alexey Appolonov <alexey@altlinux.org> 2019.12.04-alt2
- Column for the comments has been added to excluded-issues.csv.

* Wed Dec 04 2019 Alexey Appolonov <alexey@altlinux.org> 2019.12.04-alt1
- New type of inner knowledge - discarded matches (matches that should not
  be saved in cve-manager DB).

* Mon Nov 25 2019 Alexey Appolonov <alexey@altlinux.org> 2019.11.23-alt2
- cve-manager users are privileged to modify the lists.

* Sat Nov 23 2019 Alexey Appolonov <alexey@altlinux.org> 2019.11.23-alt1
- Initial release.
